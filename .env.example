# Server
ECHONET_HOST=0.0.0.0
ECHONET_PORT=8123

# Security
# DEV ONLY â€” replace for home deployment
ECHONET_API_KEY=dev-change-me
# Optional: require a separate admin key for registering targets
ECHONET_ADMIN_KEY=dev-admin-change-me

# Security - IP/Host Allowlist
# Comma-separated list of allowed IPs and DNS names
ECHONET_ALLOWLIST=localhost,127.0.0.1,192.168.1.0/24
ECHONET_RATE_LIMIT_PER_MIN=60

# Sessions
ECHONET_SESSION_TIMEOUT_S=25

# Router phrases
# Comma-separated. Case-insensitive substring match for v0.1.
ECHONET_CANCEL_PHRASES=cancel,never mind,nevermind,stop listening

# Forwarding behavior
ECHONET_FORWARD_STRIP_TRIGGER=true
ECHONET_HTTP_TIMEOUT_S=3.0

# Database
ECHONET_DB_PATH=echonet_registry.db

# Initial state on startup
# Set to "trigger" (idle listening) or "active" (actively listening for response)
ECHONET_INITIAL_LISTEN_MODE=trigger

# Discovery settings (mDNS)
ECHONET_DISCOVERY_ENABLED=true
ECHONET_DISCOVERY_NAME=Echonet Main Floor
ECHONET_DISCOVERY_HOST=echonet
ECHONET_DISCOVERY_ZONE=home
ECHONET_DISCOVERY_SUBZONE=main-floor

# ASR (Faster Whisper) settings
# Model size: tiny, base, small, medium, large-v2, large-v3
# Smaller = faster, larger = more accurate
ECHONET_WHISPER_MODEL=base
ECHONET_WHISPER_DEVICE=cpu  # or "cuda" for GPU
ECHONET_WHISPER_COMPUTE_TYPE=int8  # int8 for CPU, float16 for GPU
ECHONET_WHISPER_LANGUAGE=en  # language code or "auto" for auto-detection

# Audio device settings
# Device index: 0 = first device or system default (see startup logs for available devices)
ECHONET_AUDIO_DEVICE_INDEX=0
ECHONET_AUDIO_SAMPLE_RATE=16000  # 16kHz is optimal for speech recognition
ECHONET_AUDIO_CHANNELS=1  # 1 = mono, 2 = stereo

# Voice Activity Detection (VAD) settings
# How long to wait for silence before stopping recording
ECHONET_AUDIO_SILENCE_DURATION=1.0  # seconds of silence (1.0 = stop after 1s of quiet)
ECHONET_AUDIO_MIN_DURATION=0.5  # minimum recording duration (prevent too-short clips)
ECHONET_AUDIO_MAX_DURATION=30.0  # maximum recording duration (safety timeout)
ECHONET_AUDIO_ENERGY_THRESHOLD=0.01  # audio energy threshold for initial sound detection (0.01 = fairly sensitive)
ECHONET_AUDIO_USE_WHISPER_VAD=true  # use Faster Whisper's VAD for speech detection (more accurate, slightly slower)

# Echonet event posting
ECHONET_ECHONET_SOURCE_ID=microphone
ECHONET_ECHONET_ROOM=default

# Testing settings
# Set to true to use pre-recorded audio files instead of microphone
ECHONET_TEST_MODE=false
ECHONET_TEST_AUDIO_DIR=test_audio  # Directory with trigger/ and active/ subdirectories
ECHONET_TEST_LOOP_DELAY=2.0  # Seconds between processing test files


